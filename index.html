<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spin Game</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111">
<link rel="icon" href="icon-192.png">

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle, #222, #000);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.game {
    text-align: center;
}

.wheel {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    border: 8px solid #fff;
    margin: 20px auto;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    transition: transform 2s cubic-bezier(.17,.67,.14,1);
}

button {
    padding: 12px 24px;
    font-size: 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.balance {
    margin-top: 10px;
    font-size: 20px;
}
</style>
</head>

<body>
<div class="game">
    <h1>üé∞ Spin</h1>
    <div class="wheel" id="wheel">SPIN</div>
    <button onclick="spin()">–ö—Ä—É—Ç–∏—Ç—å</button>
    <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">100</span></div>
</div>

<!-- –ó–≤—É–∫–∏ -->
<audio id="spinSound" src="spin.mp3"></audio>
<audio id="winSound" src="win.mp3"></audio>

<script>
let balance = 100;
let spinning = false;

// —Ñ–æ–Ω —Ç–∏—à–µ
document.getElementById("spinSound").volume = 0.2;
document.getElementById("winSound").volume = 0.4;

function spin() {
    if (spinning || balance <= 0) return;
    spinning = true;

    balance -= 10;
    updateBalance();

    // –≤–∏–±—Ä–∞—Ü–∏—è
    if (navigator.vibrate) navigator.vibrate(50);

    const wheel = document.getElementById("wheel");
    const spinSound = document.getElementById("spinSound");
    const winSound = document.getElementById("winSound");

    spinSound.currentTime = 0;
    spinSound.play();

    const rotation = 360 * 5 + Math.random() * 360;
    wheel.style.transform = `rotate(${rotation}deg)`;

    setTimeout(() => {
        // —à–∞–Ω—Å –ø–æ–±–µ–¥—ã ~50%
        const win = Math.random() < 0.5;

        if (win) {
            balance += 20; // –ø–æ—á—Ç–∏ –≤—ã—Ö–æ–¥ –≤ –Ω–æ–ª—å
            winSound.currentTime = 0;
            winSound.play();
            wheel.textContent = "WIN üéâ";
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
        } else {
            wheel.textContent = "LOSE ‚ùå";
        }

        updateBalance();
        spinning = false;
    }, 2000);
}

function updateBalance() {
    document.getElementById("balance").textContent = balance;
}
</script>
</body>
</html>
